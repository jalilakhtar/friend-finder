<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>

    <!-- Bootstrap File -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!--CSS-->
    <link href="style.css" rel="stylesheet">

    <!--Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Cormorant+Infant" rel="stylesheet">

    <!--Favicon-->
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA//36AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREAAAAAERABERAAAAARAAAREQAAABEAABEREAAAERABEREQAAABERERERAAAAAREREREAAAAAAAAREQAAAAAAAAERAAAAABEAABEAAAABERAAEQAAAAEREAAQAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAADwDwAA4AcAAMADAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAAwAMAAOAHAADwDwAA"
        rel="icon" type="image/x-icon" />

</head>

<body>
    <div class="page-header">
        <h1>Take a short quiz so we can learn some things about you.</h1>
    </div>
    <div class="row">

        <div class="col-lg-6">

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><strong>Enter basic info</strong></h3>
                </div>
                <div class="panel-body">
                    <form action="" method="POST" role="form">

                        <div class="form-group">
                            <label for="">Name</label>
                            <input type="text" class="form-control" id="name" placeholder="">
                        </div>

                        <div class="form-group">
                            <label for="">Location</label>
                            <input type="text" class="form-control" id="location" placeholder="">
                        </div>

                        <div class="form-group">
                            <label for="">Age</label>
                            <input type="text" class="form-control" id="age" placeholder="">
                        </div>

                        <div class="form-group">
                            <label for="">Photo</label>
                            <input type="text" class="form-control" id="photo" placeholder="">
                        </div>

                    </form>
                </div>
            </div>
            <div class="col-sm-12">

                <div class="panel panel-default">
                    <p>Guac is extra. Do you still order it?</p>

                    <li><input type="radio" name="quest1" value="1">Cancel.
                        <li><input type="radio" name="quest1" value="2">2
                            <li><input type="radio" name="quest1" value="3">Yes, but it get's an eyeroll.
                                <li><input type="radio" name="quest1" value="4">4
                                    <li><input type="radio" name="quest1" value="5">I know it's extra!!

                                        <br><br>
                                        <p>What is your concert going style?</p>
                                        <li><input type="radio" name="quest2" value="1">I'm not in to live music.
                                            <li><input type="radio" name="quest2" value="2">2
                                                <li><input type="radio" name="quest2" value="3">3
                                                    <li><input type="radio" name="quest2" value="4">4
                                                        <li><input type="radio" name="quest2" value="5">By the end my legs hurt from dancing and my voice is gone from singing.
                                                            <br><br>
                                                            <p>If you had one shot, one opportunity, to sieze everything you ever wanted in one moment, would you capture it or just let it slip?</p>
                                                            <li><input type="radio" name="quest3" value="1">There's vomit on my sweater already, mom's spaghetti.
                                                                <li><input type="radio" name="quest3" value="2">2
                                                                    <li><input type="radio" name="quest3" value="3">Nervous, but on the surface calm and ready.
                                                                        <li><input type="radio" name="quest3" value="4">4
                                                                            <li><input type="radio" name="quest3" value="5">Lose myself in the moment.
                                                                                <br><br>
                                                                                <p>How efficient are you during airport security?</p>
                                                                                <li><input type="radio" name="quest4" value="1">I have to take my shoes off?
                                                                                    <li><input type="radio" name="quest4" value="2">2
                                                                                        <li><input type="radio" name="quest4" value="3">3
                                                                                            <li><input type="radio" name="quest4" value="4">4
                                                                                                <li><input type="radio" name="quest4" value="5">Time me!
                                                                                                    <br><br>
                                                                                                    <p>What do you wear on Wednesdays?</p>
                                                                                                    <li><input type="radio" name="quest5" value="1">Sweatpants are all that fit me.
                                                                                                        <li><input type="radio" name="quest5" value="2">2
                                                                                                            <li><input type="radio" name="quest5" value="3">3
                                                                                                                <li><input type="radio" name="quest5" value="4">4
                                                                                                                    <li><input type="radio" name="quest5" value="5">On Wednesdays we wear Pink.
                                                                                                                        <br><br>
                                                                                                                        <p>How competitive are you?</p>
                                                                                                                        <li><input type="radio" name="quest6" value="1">I just like to smile.
                                                                                                                            <li><input type="radio" name="quest6" value="2">2
                                                                                                                                <li><input type="radio" name="quest6" value="3">3
                                                                                                                                    <li><input type="radio" name="quest6" value="4">4
                                                                                                                                        <li><input type="radio" name="quest6" value="5">If you ain't first you're last!
                                                                                                                                            <br><br>
                                                                                                                                            <p>Are you an aggressive person?</p>
                                                                                                                                            <li><input type="radio" name="quest7" value="1">I want people to be feared by how much they love me.
                                                                                                                                                <li><input type="radio" name="quest7" value="2">2
                                                                                                                                                    <li><input type="radio" name="quest7" value="3">3
                                                                                                                                                        <li><input type="radio" name="quest7" value="4">4
                                                                                                                                                            <li><input type="radio" name="quest7" value="5">The worst thing about prision was the dementors.
                                                                                                                                                                <br><br>
                                                                                                                                                                <p>How active are you on social media?</p>
                                                                                                                                                                <li><input type="radio" name="quest8" value="1">I think I have a myspace.
                                                                                                                                                                    <li><input type="radio" name="quest8" value="2">2
                                                                                                                                                                        <li><input type="radio" name="quest8" value="3">3
                                                                                                                                                                            <li><input type="radio" name="quest8" value="4">4
                                                                                                                                                                                <li><input type="radio" name="quest8" value="5">If it wasn't on snapchat it didn't
                                                                                                                                                                                    happen.
                                                                                                                                                                                    <br><br>
                                                                                                                                                                                    <p>Are you a drinker?</p>
                                                                                                                                                                                    <li><input type="radio" name="quest9" value="1">It's so hot. Milk was a bad
                                                                                                                                                                                        choice
                                                                                                                                                                                        <li><input type="radio" name="quest9" value="2">2
                                                                                                                                                                                            <li><input type="radio" name="quest9" value="3">3
                                                                                                                                                                                                <li><input type="radio" name="quest9" value="4">4
                                                                                                                                                                                                    <li><input type="radio" name="quest9" value="5">I love scotch.
                                                                                                                                                                                                        Scotchy scotch scotch.
                                                                                                                                                                                                        <br><br>
                                                                                                                                                                                                        <p>How emotional are you?</p>
                                                                                                                                                                                                        <li><input type="radio" name="quest10" value="1">I wish
                                                                                                                                                                                                            I could bake a cake of rainbows and smiles and
                                                                                                                                                                                                            everyone would eat it and be happy.
                                                                                                                                                                                                            <li><input type="radio" name="quest10" value="2">2
                                                                                                                                                                                                                <li><input type="radio" name="quest10" value="3">3
                                                                                                                                                                                                                    <li><input type="radio" name="quest10" value="4">4
                                                                                                                                                                                                                        <li><input type="radio" name="quest10"
                                                                                                                                                                                                                                value="5">There's no crying in
                                                                                                                                                                                                                            baseball.
                                                                                                                                                                                                                            <br><br>

                </div>
            </div>
            <p><a class="btn btn-primary btn-lg" href="new" role="button" id="addBtn">Find a friend!</a></p>

            <!-- Modal -->
            <div id="resultsModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h2 class="modal-title"><strong>Best Match</strong></h2>
                        </div>
                        <div class="modal-body">
                            <h2 id="matchName"></h2>
                            <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>

            <a href="/api/survey">API Member Link</a>

</body>

</html>

<!--Jquery-->
<script type="text/javascript" src='http://code.jquery.com/jquery-2.1.3.min.js'></script>

<script type="text/javascript">
    //starts js

    // Chosen CSS
    var config = {
        '.chosen-select': {},
        '.chosen-select-deselect': {
            allow_single_deselect: true
        },
        '.chosen-select-no-single': {
            disable_search_threshold: 10
        },
        '.chosen-select-no-results': {
            no_results_text: 'Oops, nothing found!'
        },
        '.chosen-select-width': {
            width: "95%"
        }
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }

    console.log("js loaded");
    //takes basic info and adds it to the database
    $(addBtn).on("click", function() {
                //console.log("click");

                function validateForm() {
                    var isValid = true;
                    $('.form-control').each(functon() {
                        if ($(this).val() === "")
                            isValid = false
                    })
                    return isValid;

                    //if all forms are filled
                    if (validateForm() == true) {

                        var answers = [] //creates array to hold the values of the questions

                        //takes the value of each checked button and pushes it into the array
                        $('input:checked').each(function() {
                            answers.push($(this).val());
                        });


                        //creates information api to send to database
                        var userData = {
                            name: $("#name").val().trim(),
                            location: $("#location").val().trim(),
                            age: $("#age").val().trim(),
                            photoLink: $("#photo").val().trim(), //need to check
                            score: $(answers)
                        };

                        console.log(newData);

                        //gets the location of the root page
                        var currentURL = window.location.origin;

                        //adds new member to the api database
                        $.post(currentURL + "/api/friends", userData,
                            function(data) {
                                $("#matchName").text(data.name);
                                $("#matchImg").attr("src", data.photo);
                                $("#resultsModal").modal('toggle');
                            });
                    } else {
                        alert("Please fill out all fields");
                    }
                    return false;

                };
</script>